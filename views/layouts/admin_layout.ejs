<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/admin/css/main.css">
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="https://i.pinimg.com/736x/d6/dc/c4/d6dcc4100382a8523af639b989878242.jpg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
    <link rel="stylesheet" href="/admin/css/category.css">
    <link rel="stylesheet" href="/admin/css/product.css">
    <link rel="stylesheet" href="/admin/css/usermanagement.css">
    <link rel="stylesheet" href="/admin/css/order-management.css">
    <link rel="stylesheet" href="/admin/css/order-details.css">
    <link rel="stylesheet" href="/admin/css/coupon.css">


</head>

<body>


    <nav class="navbar">
        <div class="navbar-brand">AdminPanel</div>
        <div class="navbar-profile">
            <img src="https://i.pinimg.com/736x/fc/62/93/fc6293d042f1575f254529d006c8a503.jpg" alt="Profile"
                class="profile-img">
            <span>Admin</span>
        </div>
    </nav>


    <aside class="sidebar">
        <a href="/admin/dashboard" class="menu-item active">
            <i class="fas fa-tachometer-alt"></i>
            <span>Dashboard</span>
        </a>
        <a href="/admin/product" class="menu-item">
            <i class="fas fa-box"></i>
            <span>Products</span>
        </a>
        <a href="/admin/users" class="menu-item">
            <i class="fas fa-users"></i>
            <span>Users</span>
        </a>
        <a href="/admin/category" class="menu-item">
            <i class="fas fa-list"></i>
            <span>Categories</span>
        </a>
        <a href="/admin/coupon" class="menu-item">
            <i class="fas fa-ticket-alt"></i>
            <span>Coupons</span>
        </a>
        <a href="/admin/order-management" class="menu-item">
            <i class="fas fa-shopping-cart"></i>
            <span>Orders</span>
        </a>

        <a href="#" class="menu-item">
            <i class="fas fa-gift"></i>
            <span>Offers</span>
        </a>


        <a onclick="logout()" class="menu-item">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
        </a>
    </aside>




    <!-- Content -->
    <main class="content">
        <%- body %>
    </main>


    <!-- Footer -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>


    <script src="/admin/js/userblock.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <scrip src="/admin/js/category.js">
        </script>
        <script src="/admin/js/categorydelete.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
        <scrip src="/admin/js/productdelete.js">
            </script>



            <script>

                function logout() {
                    console.log("Logout clicked");

                    fetch('/logout', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    })
                        .then(response => {
                            if (response.ok) {
                                console.log("Logout successful");
                                Swal.fire({
                                    icon: 'success',
                                    title: 'Logout Successful',
                                    showConfirmButton: false,
                                    timer: 2500
                                })
                                window.location.href = '/admin/login';
                            } else {
                                console.error("Failed to logout:", response.statusText);
                                Swal.fire({
                                    icon: 'error',
                                    title: response.message ||  'Logout Failed',
                                    text: 'Please try again',
                                    showConfirmButton: false,
                                    timer: 1500
                                })
                            }
                        })
                        .catch(error => {
                            console.error("Network error during logout:", error);
                            Swal.fire({
                                icon: 'error',
                                title: 'Logout Failed',
                                text: 'Please try again',
                                showConfirmButton: false,
                                timer: 1500
                            })
                        });
                }



            </script>

</body>

</html>